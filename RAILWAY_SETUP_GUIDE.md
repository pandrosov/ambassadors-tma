# üöÄ –ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ Railway

## ‚ö†Ô∏è –í–ê–ñ–ù–û: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Buildpack/Dockerfile

Railway –º–æ–∂–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å —Å–ø–æ—Å–æ–± —Å–±–æ—Ä–∫–∏. –ß—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Dockerfile:

### –î–ª—è Backend —Å–µ—Ä–≤–∏—Å–∞:
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–µ—Ä–≤–∏—Å –≤ Railway Dashboard
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings** ‚Üí **Build & Deploy**
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã–±—Ä–∞–Ω **Dockerfile** (–Ω–µ Nixpacks)
4. –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ "Nixpacks Deprecated" - Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—Å—è –Ω–∞ Dockerfile

### –î–ª—è Frontend —Å–µ—Ä–≤–∏—Å–∞:
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–µ—Ä–≤–∏—Å –≤ Railway Dashboard
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings** ‚Üí **Build & Deploy**
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã–±—Ä–∞–Ω **Dockerfile** (–Ω–µ Railpack/Nixpacks)
4. –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ "Railpack" - Railway –¥–æ–ª–∂–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ Dockerfile –ø–æ—Å–ª–µ —Å–ª–µ–¥—É—é—â–µ–≥–æ –¥–µ–ø–ª–æ—è
5. **–í–∞–∂–Ω–æ**: Root Directory –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `.` (—Ç–æ—á–∫–∞ - –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞), —á—Ç–æ–±—ã Railway –Ω–∞—à–µ–ª –∫–æ—Ä–Ω–µ–≤–æ–π Dockerfile

---

## üìã –ü–æ—à–∞–≥–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ JWT_SECRET:
```bash
node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
```
–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç - –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –¥–ª—è backend.

---

### –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ Backend —Å–µ—Ä–≤–∏—Å–∞

1. –í Railway Dashboard –Ω–∞–∂–º–∏—Ç–µ **"+ New"** ‚Üí **"GitHub Repo"**
2. –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π `ambassadors-tma`
3. Railway —Å–æ–∑–¥–∞—Å—Ç —Å–µ—Ä–≤–∏—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Root Directory:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å ‚Üí **Settings**
2. –ù–∞–π–¥–∏—Ç–µ **"Root Directory"**
3. –£–∫–∞–∂–∏—Ç–µ: `backend`
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Buildpack:**
1. –í **Settings** ‚Üí **Build & Deploy**
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã–±—Ä–∞–Ω **Dockerfile** (–Ω–µ Nixpacks)
3. –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ Nixpacks - Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—Å—è –Ω–∞ Dockerfile –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –¥–µ–ø–ª–æ–µ

---

### –®–∞–≥ 3: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

1. –í Railway Dashboard –Ω–∞–∂–º–∏—Ç–µ **"+ New"** ‚Üí **"Database"** ‚Üí **"Add PostgreSQL"**
2. Railway —Å–æ–∑–¥–∞—Å—Ç PostgreSQL —Å–µ—Ä–≤–∏—Å
3. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –±–∞–∑—É –∫ backend:
   - –û—Ç–∫—Ä–æ–π—Ç–µ **backend** —Å–µ—Ä–≤–∏—Å ‚Üí **Variables**
   - –ù–∞–∂–º–∏—Ç–µ **"+ New Variable"** ‚Üí **"Reference Variable"**
   - –í—ã–±–µ—Ä–∏—Ç–µ PostgreSQL —Å–µ—Ä–≤–∏—Å ‚Üí `DATABASE_URL`
   - Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–∏—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é

---

### –®–∞–≥ 4: –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è Backend

–í —Ä–∞–∑–¥–µ–ª–µ **Variables** backend —Å–µ—Ä–≤–∏—Å–∞ –¥–æ–±–∞–≤—å—Ç–µ:

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|----------|----------|
| `TELEGRAM_BOT_TOKEN` | `–≤–∞—à_—Ç–æ–∫–µ–Ω_–æ—Ç_BotFather` | –¢–æ–∫–µ–Ω Telegram –±–æ—Ç–∞ |
| `JWT_SECRET` | `—Å—Ç—Ä–æ–∫–∞_–∏–∑_—à–∞–≥–∞_1` | –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è JWT |
| `NODE_ENV` | `production` | –û–∫—Ä—É–∂–µ–Ω–∏–µ |
| `FRONTEND_URL` | `https://–≤–∞—à-frontend-url.railway.app` | URL —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (–∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è frontend) |

---

### –®–∞–≥ 5: Networking Backend

1. –û—Ç–∫—Ä–æ–π—Ç–µ backend —Å–µ—Ä–≤–∏—Å ‚Üí **Settings** ‚Üí **Networking**
2. –í —Ä–∞–∑–¥–µ–ª–µ **"Public Networking"**:
   - **Port**: `$PORT` –∏–ª–∏ `3000`
   - –ù–∞–∂–º–∏—Ç–µ **"Update"**
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **Public Domain** (–Ω–∞–ø—Ä–∏–º–µ—Ä: `backend-xxx.railway.app`)
   - –≠—Ç–æ URL –±—ç–∫–µ–Ω–¥–∞, –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –¥–ª—è frontend

---

### –®–∞–≥ 6: –°–æ–∑–¥–∞–Ω–∏–µ Frontend —Å–µ—Ä–≤–∏—Å–∞

1. –í Railway Dashboard –Ω–∞–∂–º–∏—Ç–µ **"+ New"** ‚Üí **"GitHub Repo"**
2. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–æ—Ç –∂–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π `ambassadors-tma`
3. Railway —Å–æ–∑–¥–∞—Å—Ç —Å–µ—Ä–≤–∏—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Root Directory:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å ‚Üí **Settings**
2. –ù–∞–π–¥–∏—Ç–µ **"Root Directory"**
3. –£–∫–∞–∂–∏—Ç–µ: `.` (—Ç–æ—á–∫–∞ - –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞)
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Buildpack:**
1. –í **Settings** ‚Üí **Build & Deploy**
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã–±—Ä–∞–Ω **Dockerfile** (–Ω–µ Nixpacks)

---

### –®–∞–≥ 7: –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è Frontend

–í —Ä–∞–∑–¥–µ–ª–µ **Variables** frontend —Å–µ—Ä–≤–∏—Å–∞ –¥–æ–±–∞–≤—å—Ç–µ:

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|----------|----------|
| `VITE_API_URL` | `https://–≤–∞—à-backend-url.railway.app` | URL –±—ç–∫–µ–Ω–¥–∞ (–∏–∑ –®–∞–≥–∞ 5) |

‚ö†Ô∏è **–í–∞–∂–Ω–æ**: URL –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–ª–Ω—ã–º —Å `https://`, –±–µ–∑ `/api` –≤ –∫–æ–Ω—Ü–µ!

---

### –®–∞–≥ 8: Networking Frontend

1. –û—Ç–∫—Ä–æ–π—Ç–µ frontend —Å–µ—Ä–≤–∏—Å ‚Üí **Settings** ‚Üí **Networking**
2. –í —Ä–∞–∑–¥–µ–ª–µ **"Public Networking"**:
   - **Port**: `80`
   - –ù–∞–∂–º–∏—Ç–µ **"Update"**
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **Public Domain** (–Ω–∞–ø—Ä–∏–º–µ—Ä: `frontend-xxx.railway.app`)
   - –≠—Ç–æ URL —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

---

### –®–∞–≥ 9: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ FRONTEND_URL –≤ Backend

1. –í–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ **backend** —Å–µ—Ä–≤–∏—Å ‚Üí **Variables**
2. –ù–∞–π–¥–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `FRONTEND_URL`
3. –û–±–Ω–æ–≤–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞ URL —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –∏–∑ –®–∞–≥–∞ 8
   - –§–æ—Ä–º–∞—Ç: `https://frontend-xxx.railway.app`

---

### –®–∞–≥ 10: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

**Backend:**
- –û—Ç–∫—Ä–æ–π—Ç–µ: `https://–≤–∞—à-backend-url.railway.app/health`
- –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è: `{"status":"ok","timestamp":"..."}`

**Frontend:**
- –û—Ç–∫—Ä–æ–π—Ç–µ: `https://–≤–∞—à-frontend-url.railway.app`
- –î–æ–ª–∂–Ω–∞ –æ—Ç–∫—Ä—ã—Ç—å—Å—è –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
- Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω–∏—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ Prisma –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ backend

---

## üîß –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞: "npm ci can only install packages when your package.json and package-lock.json are in sync"

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –µ—Å—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–π `package-lock.json`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Railway –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **Dockerfile**, –∞ –Ω–µ Nixpacks
3. –í Dockerfile –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `npm install`, –∞ –Ω–µ `npm ci`

### –û—à–∏–±–∫–∞: "Cannot find module '@ambassadors/shared'"

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ **Root Directory**:
   - Backend: `backend`
   - Frontend: `.` (–∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞)
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Railway –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Dockerfile (–∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç workspaces)

### –û—à–∏–±–∫–∞: "Port already in use" –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–æ—Ä—Ç–æ–º

**–†–µ—à–µ–Ω–∏–µ:**
1. Backend: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `$PORT` –∏–ª–∏ `3000` –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Networking
2. Frontend: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `80` –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Networking
3. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç —Ç—Ä–∞—Ñ–∏–∫ –Ω–∞ —ç—Ç–∏ –ø–æ—Ä—Ç—ã

### –°–µ—Ä–≤–∏—Å –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: **Deployments** ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–ø–ª–æ–π ‚Üí **View Logs**
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∑–∞–ø–æ–ª–Ω–µ–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `DATABASE_URL` –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ –∫ PostgreSQL
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `VITE_API_URL` —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π backend URL

---

## üìù –ß–µ–∫-–ª–∏—Å—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

- [ ] Backend —Å–µ—Ä–≤–∏—Å —Å–æ–∑–¥–∞–Ω
- [ ] Root Directory backend: `backend`
- [ ] Backend –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Dockerfile (–Ω–µ Nixpacks)
- [ ] PostgreSQL —Å–µ—Ä–≤–∏—Å —Å–æ–∑–¥–∞–Ω –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ backend
- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ backend –∑–∞–ø–æ–ª–Ω–µ–Ω—ã:
  - [ ] `TELEGRAM_BOT_TOKEN`
  - [ ] `JWT_SECRET`
  - [ ] `NODE_ENV=production`
  - [ ] `DATABASE_URL` (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç PostgreSQL)
- [ ] Networking backend: Port = `$PORT` –∏–ª–∏ `3000`
- [ ] URL backend —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω
- [ ] Frontend —Å–µ—Ä–≤–∏—Å —Å–æ–∑–¥–∞–Ω
- [ ] Root Directory frontend: `.` (—Ç–æ—á–∫–∞)
- [ ] Frontend –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Dockerfile (–Ω–µ Nixpacks)
- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è frontend –∑–∞–ø–æ–ª–Ω–µ–Ω–∞:
  - [ ] `VITE_API_URL` (URL backend)
- [ ] Networking frontend: Port = `80`
- [ ] URL frontend —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω
- [ ] `FRONTEND_URL` –≤ backend –æ–±–Ω–æ–≤–ª–µ–Ω –Ω–∞ URL frontend
- [ ] Backend –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ `/health`
- [ ] Frontend –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ

---

## üéØ –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ Railway

```
–ü—Ä–æ–µ–∫—Ç ambassadors-tma
‚îú‚îÄ‚îÄ PostgreSQL (–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö)
‚îú‚îÄ‚îÄ backend (—Å–µ—Ä–≤–∏—Å)
‚îÇ   ‚îú‚îÄ‚îÄ Root Directory: backend
‚îÇ   ‚îú‚îÄ‚îÄ Buildpack: Dockerfile
‚îÇ   ‚îú‚îÄ‚îÄ Port: $PORT –∏–ª–∏ 3000
‚îÇ   ‚îî‚îÄ‚îÄ Variables:
‚îÇ       ‚îú‚îÄ‚îÄ DATABASE_URL (–æ—Ç PostgreSQL)
‚îÇ       ‚îú‚îÄ‚îÄ TELEGRAM_BOT_TOKEN
‚îÇ       ‚îú‚îÄ‚îÄ JWT_SECRET
‚îÇ       ‚îú‚îÄ‚îÄ NODE_ENV=production
‚îÇ       ‚îî‚îÄ‚îÄ FRONTEND_URL
‚îî‚îÄ‚îÄ frontend (—Å–µ—Ä–≤–∏—Å)
    ‚îú‚îÄ‚îÄ Root Directory: . (—Ç–æ—á–∫–∞)
    ‚îú‚îÄ‚îÄ Buildpack: Dockerfile
    ‚îú‚îÄ‚îÄ Port: 80
    ‚îî‚îÄ‚îÄ Variables:
        ‚îî‚îÄ‚îÄ VITE_API_URL
```

