[phases.setup]
nixPkgs = ["nodejs_18", "npm-9_x", "openssl"]

[phases.install]
# Если Root Directory = frontend, переходим в родительскую директорию
# Railway клонирует репозиторий в /app, поэтому если мы в /app/frontend, то cd .. перейдет в /app
cmds = ["cd .. && npm install --workspaces"]

[phases.build]
cmds = ["cd frontend && npm run build"]

[start]
cmd = "cd frontend && npx serve -s dist -l $PORT"

