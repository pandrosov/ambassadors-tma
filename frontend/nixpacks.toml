[phases.setup]
nixPkgs = ["nodejs_18", "npm-9_x", "openssl"]

[phases.install]
# Устанавливаем зависимости из корня проекта для работы с workspaces
# Root Directory должен быть . (корень проекта)
cmds = ["npm install --workspaces"]

[phases.build]
# Собираем фронтенд из его директории
cmds = ["cd frontend && npm run build"]

[start]
# Запускаем сервер из директории frontend
cmd = "cd frontend && npx serve -s dist -l $PORT"

